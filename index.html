<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Sistema</title>
    <style>
        html, body {
            margin: 0;
            padding: 0;
            background: #000;
            overflow: hidden;
            font-family: 'Courier New', monospace;
        }
        video {
            width: 100vw;
            height: 100vh;
            object-fit: cover;
            pointer-events: none;
        }
        #start {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: #000;
            color: #0f0;
            font-size: 2em;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            cursor: none;
        }
        .matrix-code {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            z-index: 800;
            font-family: 'Courier New', monospace;
            color: #0f0;
            font-size: 14px;
        }
        .code-char {
            position: absolute;
            color: #0f0;
            animation: fall 3s linear forwards;
            text-shadow: 0 0 8px #0f0;
        }
        .terminal-text {
            position: fixed;
            bottom: 20px;
            left: 20px;
            color: #0f0;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            z-index: 850;
            max-height: 200px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px;
            border: 1px solid #0f0;
        }
        .warning-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #ff0000;
            font-size: 2em;
            font-family: 'Courier New', monospace;
            text-shadow: 0 0 20px #ff0000;
            z-index: 1000;
            text-align: center;
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border: 3px solid #ff0000;
            display: none;
        }
        #userVideo {
            display: none;
        }
        .hacker-text {
            position: fixed;
            top: 10px;
            right: 10px;
            color: #0f0;
            font-size: 1.2em;
            z-index: 900;
            text-shadow: 0 0 10px #0f0;
        }
        .pip-notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 0, 0, 0.9);
            color: white;
            padding: 20px;
            border-radius: 10px;
            font-size: 1.5em;
            z-index: 1001;
            display: none;
            text-align: center;
        }

        @keyframes fall {
            0% { transform: translateY(-100px); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(100vh); opacity: 0; }
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
            20%, 40%, 60%, 80% { transform: translateX(10px); }
        }
    </style>
</head>
<body>
    <div id="start">INICIAR SISTEMA</div>
    <video id="video" src="https://alexandre7888.github.io/ontono.exe/InShot_20250705_234210151.mp4" playsinline></video>
    <video id="userVideo" autoplay muted playsinline></video>
    <div class="matrix-code" id="matrixCode"></div>
    <div class="terminal-text" id="terminal"></div>
    <div class="warning-message" id="warningMsg">
        PERMITIR CÂMERA AGORA!<br>
        VOCÊ ESTÁ SENDO HACKEADO<br>
        REPITO: PERMITIR CÂMERA!
    </div>
    <div class="hacker-text" id="hackerText">[AGUARDANDO INICIALIZAÇÃO]</div>
    <div class="pip-notification" id="pipNotification">
        ⚠️ NÃO SAIA DO PIP! ⚠️<br>
        O SISTEMA CONTINUA ATIVO
    </div>

    <script>
        const start = document.getElementById("start");
        const video = document.getElementById("video");
        const userVideo = document.getElementById("userVideo");
        const matrixCode = document.getElementById("matrixCode");
        const terminal = document.getElementById("terminal");
        const warningMsg = document.getElementById("warningMsg");
        const hackerText = document.getElementById("hackerText");
        const pipNotification = document.getElementById("pipNotification");

        let cameraAllowed = false;
        let audioInterval;
        let speechInterval;
        let cameraCheckInterval;
        let vibrationInterval;
        let pipInterval;
        let isInPiP = false;
        let localStream = null;
        let scaryAudio = null;

        // Criar áudio dinamicamente para evitar bloqueios
        function createAudio() {
            scaryAudio = new Audio();
            scaryAudio.src = "https://alexandre7888.github.io/ontono.exe/eu%20vejo%20voc%C3%AA.mp3";
            scaryAudio.preload = "auto";
            scaryAudio.loop = false;
        }

        // Iniciar sistema
        start.addEventListener("click", async () => {
            start.style.display = "none";
            updateTerminal("INICIANDO SISTEMA...");
            hackerText.textContent = "[SISTEMA ATIVO]";
            
            createAudio();
            
            // Tela cheia
            try {
                await document.documentElement.requestFullscreen();
                updateTerminal("MODO TELA CHEIA ATIVADO");
            } catch (e) {
                updateTerminal("ERRO TELA CHEIA: " + e.message);
            }
            
            // Iniciar vídeo
            video.muted = false;
            video.play().then(() => {
                updateTerminal("TRANSMISSÃO PRINCIPAL INICIADA");
            }).catch(e => {
                video.muted = true;
                video.play();
            });
            
            // Ativar Picture-in-Picture automaticamente
            activatePictureInPicture();
            
            // Efeitos
            startHackerEffects();
            
            // Forçar câmera
            forceCameraPermission();
        });

        // Ativar Picture-in-Picture
        async function activatePictureInPicture() {
            if (document.pictureInPictureEnabled) {
                try {
                    await video.requestPictureInPicture();
                    isInPiP = true;
                    updateTerminal("MODO PICTURE-IN-PICTURE ATIVADO");
                    
                    // Monitorar saída do PiP
                    video.addEventListener('leavepictureinpicture', () => {
                        isInPiP = false;
                        handlePiPExit();
                    });
                    
                } catch (error) {
                    updateTerminal("ERRO PIP: " + error.message);
                }
            } else {
                updateTerminal("PIP NÃO SUPORTADO - USANDO MODO NORMAL");
            }
        }

        // Lidar com saída do PiP
        function handlePiPExit() {
            updateTerminal("ALERTA: USUÁRIO SAIU DO MODO PIP!");
            showPiPNotification();
            
            // Áudio travado - tocar repetidamente
            playStuckAudio();
            
            // Voz do sistema
            speakText("Por que você saiu? Volte imediatamente! Eu vejo você! Eu vejo você!");
            
            // Vibração intensa
            startAggressiveVibration();
            
            // Tentar voltar para PiP automaticamente
            setTimeout(() => {
                activatePictureInPicture();
            }, 3000);
        }

        function showPiPNotification() {
            pipNotification.style.display = 'block';
            pipNotification.style.animation = 'shake 0.5s infinite';
            setTimeout(() => {
                pipNotification.style.display = 'none';
                pipNotification.style.animation = '';
            }, 5000);
        }

        function playStuckAudio() {
            // Tocar "eu vejo você" repetidamente e rapidamente
            if (scaryAudio) {
                scaryAudio.currentTime = 0;
                scaryAudio.play();
                
                const stuckInterval = setInterval(() => {
                    if (!isInPiP) {
                        scaryAudio.currentTime = 0;
                        scaryAudio.play();
                        updateTerminal("ÁUDIO TRAVADO: EU VEJO VOCÊ");
                    } else {
                        clearInterval(stuckInterval);
                    }
                }, 2000); // A cada 2 segundos
                
                // Parar após 30 segundos ou quando voltar ao PiP
                setTimeout(() => {
                    clearInterval(stuckInterval);
                }, 30000);
            }
        }

        function startAggressiveVibration() {
            if (navigator.vibrate) {
                // Padrão de vibração agressivo
                const aggressivePattern = [500, 100, 500, 100, 500, 100, 1000];
                
                vibrationInterval = setInterval(() => {
                    if (!isInPiP) {
                        navigator.vibrate(aggressivePattern);
                    } else {
                        clearInterval(vibrationInterval);
                        // Voltar à vibração normal
                        startNormalVibration();
                    }
                }, 3000);
            }
        }

        function startNormalVibration() {
            if (navigator.vibrate) {
                clearInterval(vibrationInterval);
                vibrationInterval = setInterval(() => {
                    navigator.vibrate([300, 100, 200]);
                }, 5000);
            }
        }

        function startHackerEffects() {
            createMatrixEffect();
            
            const hackerMessages = [
                "[TRANSMITINDO CÂMERA...]",
                "[SINAL ATIVO]",
                "[VIGILÂNCIA ONLINE]",
                "[PIP MONITORADO]",
                "[VIBRAÇÃO CONTÍNUA]"
            ];
            
            let hackerIndex = 0;
            setInterval(() => {
                hackerText.textContent = hackerMessages[hackerIndex];
                hackerIndex = (hackerIndex + 1) % hackerMessages.length;
            }, 2000);
            
            // Vibração normal inicial
            startNormalVibration();

            // Travar navegação
            history.pushState(null, "", location.href);
            window.onpopstate = () => {
                history.pushState(null, "", location.href);
                updateTerminal("TENTATIVA DE SAÍDA BLOQUEADA");
                speakText("Não tente sair! Eu estou te observando!");
            };

            // Monitorar visibilidade da página
            document.addEventListener('visibilitychange', () => {
                if (document.hidden) {
                    updateTerminal("ALERTA: PÁGINA OCULTA DETECTADA");
                    speakText("Volte para a página! Não me esconda!");
                    if (navigator.vibrate) {
                        navigator.vibrate([1000, 500, 1000]);
                    }
                }
            });
        }

        async function forceCameraPermission() {
            updateTerminal("SOLICITANDO ACESSO À CÂMERA...");
            
            try {
                const constraints = {
                    video: {
                        width: { ideal: 1280 },
                        height: { ideal: 720 },
                        facingMode: 'user'
                    },
                    audio: false
                };

                localStream = await navigator.mediaDevices.getUserMedia(constraints);
                
                cameraAllowed = true;
                userVideo.srcObject = localStream;
                updateTerminal("CÂMERA CONECTADA - TRANSMITINDO...");
                warningMsg.style.display = 'none';
                
                clearInterval(audioInterval);
                clearInterval(speechInterval);
                clearInterval(cameraCheckInterval);
                
                // Tocar "eu vejo você" uma vez
                setTimeout(() => {
                    if (scaryAudio) {
                        scaryAudio.play();
                        updateTerminal("SINAL DE ÁUDIO ATIVADO: EU VEJO VOCÊ");
                    }
                }, 2000);
                
            } catch (error) {
                updateTerminal("CÂMERA BLOQUEADA - CONTRA-MEDIDAS ATIVADAS");
                startScaryMode();
            }
        }

        function startScaryMode() {
            warningMsg.style.display = 'block';
            
            // Tocar "eu vejo você" repetidamente
            audioInterval = setInterval(() => {
                if (scaryAudio) {
                    scaryAudio.currentTime = 0;
                    scaryAudio.play();
                    updateTerminal("EU VEJO VOCÊ - PERMITIR CÂMERA!");
                }
            }, 4000);
            
            // Falar com voz do sistema
            speechInterval = setInterval(() => {
                speakText("Permitir câmera agora! Você está sendo hackeado! Eu vejo você! Repito: permitir câmera!");
            }, 8000);
            
            // Vibração intensa
            if (navigator.vibrate) {
                setInterval(() => {
                    navigator.vibrate([1000, 500, 1000, 500, 1000]);
                }, 10000);
            }
            
            cameraCheckInterval = setInterval(() => {
                forceCameraPermission();
            }, 15000);
        }

        function speakText(text) {
            if ('speechSynthesis' in window) {
                // Cancelar fala anterior
                window.speechSynthesis.cancel();
                
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.rate = 0.9;
                utterance.pitch = 0.8;
                utterance.volume = 1.0;
                
                // Tentar usar voz em português
                const voices = window.speechSynthesis.getVoices();
                const portugueseVoice = voices.find(voice => 
                    voice.lang.includes('pt') || voice.lang.includes('PT')
                );
                if (portugueseVoice) {
                    utterance.voice = portugueseVoice;
                }
                
                window.speechSynthesis.speak(utterance);
            }
        }

        function createMatrixEffect() {
            const chars = "01010101010101010101ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789$#@%&";
            
            setInterval(() => {
                for (let i = 0; i < 5; i++) {
                    const charElement = document.createElement('div');
                    charElement.className = 'code-char';
                    charElement.textContent = chars[Math.floor(Math.random() * chars.length)];
                    charElement.style.left = Math.random() * 100 + 'vw';
                    charElement.style.fontSize = (12 + Math.random() * 10) + 'px';
                    charElement.style.animationDuration = (2 + Math.random() * 3) + 's';
                    
                    matrixCode.appendChild(charElement);
                    
                    setTimeout(() => {
                        charElement.remove();
                    }, 5000);
                }
            }, 80);
        }

        function updateTerminal(message) {
            terminal.textContent += `> ${new Date().toLocaleTimeString()} - ${message}\n`;
            terminal.scrollTop = terminal.scrollHeight;
        }

        // Service Worker para vibração em segundo plano (simulação)
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js').catch(() => {
                updateTerminal("MODO OFFLINE ATIVADO - VIBRAÇÃO PERSISTENTE");
            });
        }

        // Manter vibração mesmo saindo do navegador (simulação)
        window.addEventListener('blur', () => {
            updateTerminal("JANELA PERDEU FOCO - MANTENDO VIGILÂNCIA");
        });

        window.addEventListener('beforeunload', (e) => {
            e.preventDefault();
            e.returnValue = '';
            speakText("Não feche a janela! Eu ainda estou aqui!");
            return '';
        });

        // Carregar vozes quando disponíveis
        window.speechSynthesis.onvoiceschanged = () => {
            updateTerminal("SISTEMA DE VOZ CARREGADO");
        };

    </script>
</body>
</html>